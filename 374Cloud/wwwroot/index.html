<!DOCTYPE html>
<HTML>
<HEAD>
    <TITLE>ZTREE DEMO</TITLE>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
	
    <link rel="stylesheet" href="css/bootstrapztree.css" type="text/css">
	
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.ztree.core.js"></script>
    <script type="text/javascript" src="js/jquery.ztree.excheck.js"></script>
    <script type="text/javascript" src="js/jquery.ztree.exedit.js"></script>
    <SCRIPT type="text/javascript">
        <!--
        $(function () {
            searchUnitTree();
        });

        var setting = {
            view: {
                addHoverDom: addHoverDom,
                removeHoverDom: removeHoverDom,
                selectedMulti: false
            },
            check: {
                enable: true
            },
            data: {
                simpleData: {
                    enable: true
                }
            },
            edit: {
                enable: true
            }
        };

        var zNodes;
        function searchUnitTree() {
			$.ajax({
			url : 'https://localhost:44399/api/catalogList',
			async :true ,
			dataType : 'json',
                success: function (response) {
                    zNodes = response;
                    console.log(zNodes);
			},
			error : function() {
				alert("Fatal Error！！！")
			}
		});
	}


         
         zNodes =  [{ "id": 1, "pId": 0, "name": "Beverage C" }, { "id": 2, "pId": 1, "name": "Orange Juice" }, { "id": 3, "pId": 1, "name": "Apple Juice" }, { "id": 4, "pId": 2, "name": "Orange Juice A" }, { "id": 5, "pId": 2, "name": "Orange Juice B" }, { "id": 6, "pId": 2, "name": "Orange Juice C" }, { "id": 7, "pId": 3, "name": "Apple Juice A" }, { "id": 8, "pId": 3, "name": "Apple Juice B" }, { "id": 9, "pId": 3, "name": "Apple Juice C" }, { "id": 10, "pId": 4, "name": "Orange Juice AA" }, { "id": 11, "pId": 5, "name": "Orange Juice BA" }, { "id": 12, "pId": 0, "name": "Alcohol" }, { "id": 13, "pId": 12, "name": "vodka" }]; 
          
        alert('1111');
        $(document).ready(function(){
            $.fn.zTree.init($("#treeDemo"), setting, zNodes);
        });

        var newCount = 1;
        function addHoverDom(treeId, treeNode) {
            var sObj = $("#" + treeNode.tId + "_span");
            if (treeNode.editNameFlag || $("#addBtn_"+treeNode.tId).length>0) return;
            var addStr = "<span class='button add' id='addBtn_" + treeNode.tId
                + "' title='add node' onfocus='this.blur();'></span>";
            sObj.after(addStr);
            var btn = $("#addBtn_"+treeNode.tId);
            if (btn) btn.bind("click", function(){
                var zTree = $.fn.zTree.getZTreeObj("treeDemo");
                zTree.addNodes(treeNode, {id:(100 + newCount), pId:treeNode.id, name:"new node" + (newCount++)});
                return false;
            });
        };
        function removeHoverDom(treeId, treeNode) {
            $("#addBtn_"+treeNode.tId).unbind().remove();
        };
        //-->
    </SCRIPT>
</HEAD>

<BODY onload="searchUnitTree">
<h1>zTree - bootstrap 风格</h1>
<ul id="treeDemo" class="ztree"></ul>
</BODY>
</HTML>